(function(t){function e(e){for(var n,i,o=e[0],l=e[1],u=e[2],c=0,f=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);v&&v(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var v=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("div",{staticClass:"d-flex align-center"},[t._v(" Elections municipales 2020 ")]),r("v-spacer"),r("div",{staticClass:"align-left"},[t._v(" La Verdière ")])],1),r("v-content",[r("elections")],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",[r("v-layout",{attrs:{"text-center":"",wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("h2",[t._v("Les Suffrages")]),r("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[r("v-row",{staticClass:"mr-2 ml-2"},t._l(t.listes,(function(e){return r("v-col",{key:e.name,attrs:{sm:"4",cols:"12"}},[r("div",{staticClass:"text-left"},[t._v(" Liste "+t._s(e.name)+" "),e.percentage<.05?r("span"):t.results.winner?r("span",{staticClass:"text-no-wrap"},[t._v(" ("+t._s(e.prime+e.seats+e.restSeats)+" sièges) ")]):t._e()]),r("v-text-field",{attrs:{rules:[],required:""},model:{value:e.votes,callback:function(r){t.$set(e,"votes",r)},expression:"list.votes"}}),r("div",[r("v-btn",{on:{click:function(t){e.votes=parseInt(e.votes)+1}}},[t._v("+")]),r("v-btn",{on:{click:function(t){e.votes=parseInt(e.votes)-1}}},[t._v("-")])],1)],1)})),1)],1)],1),r("v-flex",{staticClass:"mt-5 mb-5"},[r("v-btn",{on:{click:function(e){return t.calcul()}}},[t._v("Calcul")])],1),t.results.error?r("v-flex",{attrs:{xs12:""}},[r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v(t._s(t.results.error))])])],1)],1):t.results.winner?r("v-flex",{attrs:{xs12:""}},[r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Sièges et Suffrages")]),r("div",[t._v(" "+t._s(t.results.totalSeats)+" sièges à attribuer ")]),r("div",[t._v(" "+t._s(t.results.totalVotes)+" suffrages exprimés, donc une majorité absolue de ("+t._s(t.results.totalVotes)+"/2) + 1 = "+t._s(t.results.absoluteMajority)+" voix ")])])],1),r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Seuil électoral")]),r("p",[t._v(" Les sièges sont répartis à la représentation proportionnelle à la plus forte moyenne entre toutes les listes ayant obtenu plus de 5% ("+t._s(Math.ceil(.05*t.results.totalVotes))+") des suffrages exprimés, en fonction du nombre de suffrage obtenus. ")]),t._l(t.listes,(function(e){return r("div",{key:e.name},[r("h4",[t._v("Liste "+t._s(e.name))]),t._v(" "+t._s(e.votes)+" ("+t._s((100*e.percentage).toFixed(2))+"%) ")])}))],2)],1),r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Prime Majoritaire")]),r("div",[t._v(" La prime majoritaire donne "+t._s(t.results.winner.prime)+" sièges à la liste "+t._s(t.results.winner.name)+". Ce qui laisse "+t._s(t.results.remainingSeats)+" sièges à pourvoir. ")])])],1),r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Quotient électoral")]),r("div",[t._v(" On calcule le quotient électoral : "+t._s(t.results.totalVotes)+"/"+t._s(t.results.remainingSeats)+" = "+t._s(t.results.q.toFixed(2))+" ")])])],1),r("v-card",{staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Plus forte moyenne")]),r("div",[t._v(" Attribution à la plus forte moyenne pour chaque liste ")]),t._l(t.results.lists,(function(e){return r("v-list-item",{key:e.name},[r("v-list-item-content",[r("v-row",{attrs:{justify:"center"}},[r("v-col",[r("h4",[t._v("Liste "+t._s(e.name))]),r("div",[t._v(" Q: "+t._s(e.votes)+"/"+t._s(t.results.q.toFixed(2))+" = "+t._s(e.avg.toFixed(2))+" soit "+t._s(e.seats)+" sièges ")])])],1)],1)],1)})),r("div",[t._v(" Ce qui laisse "+t._s(t.results.restSeats)+" sièges à pourvoir. ")])],2)],1),t._l(t.results.restRounds,(function(e,n){return r("v-card",{key:n,staticClass:"mx-auto mb-2",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Attribution du siège "+t._s(n+1))]),r("div",[t._v(" Attribution à la plus forte moyenne pour chaque liste ")]),t._l(t.results.lists,(function(e){return r("v-list-item",{key:e.name},[r("v-list-item-content",[r("v-row",{attrs:{justify:"center"}},[r("v-col",[r("h4",[t._v("Liste "+t._s(e.name))]),r("div",[t._v(" Q: "+t._s(e.votes)+"/"+t._s(e.rounds[n].roundSeats)+" + 1 = "+t._s(e.rounds[n].avg.toFixed(2))+" ")])])],1)],1)],1)})),r("div",[t._v(" On attribue 1 nouveau siège à la liste "+t._s(e.winner.name)+" qui a la plus forte moyenne. ")])],2)],1)})),t.results.winner?r("v-flex",{attrs:{xs12:""}},[r("v-card",{staticClass:"mx-auto",attrs:{tile:""}},[r("v-card-text",[r("h3",{staticClass:"headline font-weight-bold mb-3"},[t._v("Resultats")]),t._l(t.results.lists,(function(e){return r("div",{key:e.name},[t._v(" "+t._s(e.name)+" "+t._s(e.prime+e.seats+e.restSeats)+" sièges ")])}))],2)],1)],1):t._e()],2):t._e()],1)],1)},o=[],l=(r("a4d3"),r("e01a"),r("d28b"),r("4de4"),r("4160"),r("d81d"),r("fb6a"),r("b0c0"),r("b65f"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("53ca")),u=r("2909"),v=void 0,c=[{name:"Marignane",votes:301,isWinner:null,seats:0,remaingSeats:0,avg:0},{name:"Charrat",votes:300,isWinner:null,seats:0,remaingSeats:0,avg:0},{name:"Rogier",votes:299,isWinner:null,seats:0,remaingSeats:0,avg:0}],f=19,d=9,m={q:null,totalVotes:null};function h(t){window.console.log(t)}var p={totalSeats:null,totalVotes:null,absoluteMajority:null,winner:null,remainingSeats:null,q:null,lists:null,nRounds:null,restRounds:[]};function y(){p.error=null,c.forEach((function(t){return t.votes=parseInt(t.votes)}));var t=0;c.forEach((function(e){return t+=e.votes})),c.forEach((function(e){e.percentage=e.votes/t}));var e=c.slice(),r=e.filter((function(t){return t.percentage>=.05})),n=Math.max.apply(Math,Object(u["a"])(r.map((function(t){return t.votes})))),a=r.filter((function(t){return t.votes===n}));if(a.length>1)return h("NO WINNER"),void(p.error="Aucun gagnant clair");var s=a[0],i=Math.round(f/2);s.prime=i,r.forEach((function(t){t.isWinner=t===s,t.prime=t===s?i:0}));var o=f-i,v=t/o,d=o;r.forEach((function(t){t.avg=t.votes/v,t.seats=Math.trunc(t.avg),d-=t.seats}));var m=new Array(d);r.forEach((function(t){t.rounds=new Array(d),t.restSeats=0}));var y=d,g=0,b=function(){r.forEach((function(t){var e=t.seats+t.restSeats;t.rounds[g]={roundSeats:e,avg:t.votes/(e+1)}}));var t=Math.max.apply(Math,Object(u["a"])(r.map((function(t){return t.rounds[g].avg})))),e=r.filter((function(e){return e.rounds[g].avg===t}));if(e.length>1){var n=Math.max.apply(Math,Object(u["a"])(e.map((function(t){return t.votes}))));if(e=e.filter((function(t){return t.votes===n})),e.length>1&&g===d-1)return h("UNKNOWN LAST RESTSEAT"),{v:void 0}}m[g]={winner:e[0]};var a=e[0];r.forEach((function(t){t.rounds[g].isWinner=t===a,t.rounds[g].seats=t===a?1:0})),a.restSeats+=1,g++};while(g<d){var _=b();if("object"===Object(l["a"])(_))return _.v}h(r),p.totalSeats=f,p.totalVotes=t,p.absoluteMajority=Math.trunc(t/2+1),p.winner=s,p.remainingSeats=o,p.restSeats=d,p.q=v,p.lists=r,p.restRounds=m,p.nRounds=y}function g(){var t=f,e=!0,r=!1,n=void 0;try{for(var a,s=c[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;t-=i.seats,t-=i.remainingSeats}}catch(o){r=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}return t}function b(){var t=0,e=!0,r=!1,n=void 0;try{for(var a,s=c[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;t+=parseInt(i.votes)}}catch(o){r=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}return t}function _(){var t=b();return Math.trunc(t/2+1)}function x(){return Math.round(f/2)}function w(){return f-x()}function S(){var t=-1,e=null,r=!0,n=!1,a=void 0;try{for(var s,i=c[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value;o.votes>t&&(t=o.votes,e=o)}}catch(l){n=!0,a=l}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return e}function C(){return b()/w()}function j(t){var e=t.votes/C();return[e,Math.trunc(e)]}function M(){var t=f-x(),e=!0,r=!1,n=void 0;try{for(var a,s=c[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;t-=j(i)[1]}}catch(o){r=!0,n=o}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}return t}function V(){var t=c.slice(),e=!0,r=!1,n=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;i.seats=0,i.name==S().name&&(i.seats+=x()),i.seats+=j(i)[1]}}catch(y){r=!0,n=y}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}var o=M();while(o>0){var l=0,u=null,v=!0,f=!1,d=void 0;try{for(var m,h=t[Symbol.iterator]();!(v=(m=h.next()).done);v=!0){var p=m.value;p.wins=!1,p.q=p.votes/(p.seats+1),p.q>l&&(l=p.q,u=p)}}catch(y){f=!0,d=y}finally{try{v||null==h.return||h.return()}finally{if(f)throw d}}u.wins=!0}return t}var O={name:"Elections",data:function(){return{listes:c,seats:f,votingResult:m,remains:g,results:p,anything:null}},watch:{listes:{handler:function(){this.calcul()},deep:!0}},methods:{getTotalVotes:b,getAbsoluteMajority:_,getMajorityPrime:x,getRemainingSeats:w,getWinner:S,getQ:C,getAverage:j,getRestSeats:M,getRestSeatsDivision:V,ttt:function(){this.anything=null},calcul:function(){y()},setQ:function(){var t=0,e=!0,r=!1,n=void 0;try{for(var a,s=c[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var i=a.value;t+=i.votes}}catch(M){r=!0,n=M}finally{try{e||null==s.return||s.return()}finally{if(r)throw n}}var o=t/d;m.totalVotes=t,m.q=o;var l=!0,u=!1,v=void 0;try{for(var f,h=c[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var p=f.value;p.remainingSeats=Math.trunc(p.votes/o)}}catch(M){u=!0,v=M}finally{try{l||null==h.return||h.return()}finally{if(u)throw v}}while(g()>0){var y=0,b=null,_=!0,x=!1,w=void 0;try{for(var S,C=c[Symbol.iterator]();!(_=(S=C.next()).done);_=!0){var j=S.value;j.avg=j.votes/(j.remainingSeats+1),j.avg>y&&(y=j.avg,b=j)}}catch(M){x=!0,w=M}finally{try{_||null==C.return||C.return()}finally{if(x)throw w}}b.remainingSeats+=1}},majorityPrime:function(){var t=-1,e=null,r=!0,n=!1,a=void 0;try{for(var s,i=c[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var o=s.value;o.votes>t&&(t=o.votes,e=o)}}catch(h){n=!0,a=h}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}var l=!0,u=!1,v=void 0;try{for(var f,d=c[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var m=f.value;m===e?(m.isWinner=!0,m.seats=10):m.isWinner=!1}}catch(h){u=!0,v=h}finally{try{l||null==d.return||d.return()}finally{if(u)throw v}}},remainingSeats:function(){v.setQ()}}},q=O,E=r("2877"),k=r("6544"),R=r.n(k),A=r("8336"),L=r("b0af"),P=r("99d9"),W=r("62ad"),T=r("a523"),F=r("0e8f"),I=r("a722"),N=r("da13"),Q=r("5d23"),$=r("0fd9"),B=r("8654"),J=Object(E["a"])(q,i,o,!1,null,null,null),D=J.exports;R()(J,{VBtn:A["a"],VCard:L["a"],VCardText:P["a"],VCol:W["a"],VContainer:T["a"],VFlex:F["a"],VLayout:I["a"],VListItem:N["a"],VListItemContent:Q["a"],VRow:$["a"],VTextField:B["a"]});var K={name:"App",components:{Elections:D},data:function(){return{}}},U=K,z=r("7496"),G=r("40dc"),H=r("a75b"),X=r("2fa4"),Y=Object(E["a"])(U,a,s,!1,null,null,null),Z=Y.exports;R()(Y,{VApp:z["a"],VAppBar:G["a"],VContent:H["a"],VSpacer:X["a"]});var tt=r("f309");n["a"].use(tt["a"]);var et=new tt["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:et,render:function(t){return t(Z)}}).$mount("#app")}});
//# sourceMappingURL=app.9899d030.js.map